<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VirtuDeck</title>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js"
    integrity="sha256-KzZiKy0DWYsnwMF+X1DvQngQ2/FxF7MF3Ff72XcpuPs=" crossorigin="anonymous"></script>
</head>

<body>
  <div class="text-center">
    <div class="display-4 page-title">Tilts Against Humanity</div>
    <p class="lead">A new fun way to play Tilted</p>
  </div>
  <div class="container">
    <div id="deck0" class="deck">
      <h2>Draw a card</h2>
      <div class="active-card">
        <p id="card-text0" class="active-card-text"></p>
      </div>
      <p>
        <button class="btn btn-lg btn-success" onclick="drawCard(0);">Draw</button>
      </p>
    </div>
    <div id="deck1" class="deck">
      <h2>Draw a card</h2>
      <div class="active-card">
        <p id="card-text1" class="active-card-text"></p>
      </div>
      <p>
        <button class="btn btn-lg btn-success" onclick="drawCard(1);">Draw</button>
      </p>
    </div>
    <div id="deck2" class="deck">
      <h2>Draw a card</h2>
      <div class="active-card">
        <p id="card-text2" class="active-card-text"></p>
      </div>
      <p>
        <button class="btn btn-lg btn-success" onclick="drawCard(2);">Draw</button>
      </p>
    </div>
    <div id="deck3" class="deck">
      <h2>Draw a card</h2>
      <div class="active-card">
        <p id="card-text3" class="active-card-text"></p>
      </div>
      <p>
        <button class="btn btn-lg btn-success" onclick="drawCard(3);">Draw</button>
      </p>
    </div>
  </div>

  <script>
    // SETUP
    let Decks = Array(4);
    let CardLists = [["deck0card0", "deck0card1"], ["deck1card0", "deck1card1"], ["deck2card0", "deck2card1"], ["deck3card0", "deck3card1"]];

    function shuffle(a) {
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function refillCards() {
      for (var n = 0; n < Decks.length; n++){
        Decks[n] = [];
        Decks[n] = CardLists[n].slice();
        Decks[n] = shuffle(Decks[n]);
        console.log('INFO: Deck was refilled and shuffled.');
      }
    }

    // GAME
    function drawCard(n) {
      if (Decks[n].length < 1) {
        refillCards();
      }

      let card = Decks[n].pop();
      document.getElementById('card-text' + n).innerHTML = card;
      console.log(card);
    }

    refillCards();
  </script>
</body>

</html>